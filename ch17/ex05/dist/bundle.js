(()=>{"use strict";const e=document.querySelector("#screen").getContext("2d"),t=10;function n(n){for(let l=0;l<n.length;l++)for(let o=0;o<n[l].length;o++){const c=n[l][o];e.beginPath(),e.rect(o*t,l*t,t,t),e.fillStyle=c?"black":"white",e.fill(),e.stroke()}}const l=document.querySelector("#screen"),o=document.querySelector("#start"),c=document.querySelector("#pause");l.width=500,l.height=500;let r=null;const i=new Audio("/ch17/ex05/decision1.mp3");let a=new Array(50).fill(null).map((()=>new Array(50).fill(null).map((()=>!!Math.floor(2*Math.random())))));function u(){a=function(e){const t=e.map((e=>[...e]));for(let n=0;n<e.length;n++)for(let l=0;l<e[n].length;l++){let o=0;for(let t=-1;t<=1;t++)for(let c=-1;c<=1;c++)if(0===t&&0===c);else{const r=e[n+t]?.[l+c];!0===r&&o++}const c=t[n][l];!c&&3===o||c&&(2===o||3===o)?t[n][l]=!0:(c&&o<=1||c&&o>=4)&&(t[n][l]=!1)}return t}(a),n(a),r=requestAnimationFrame(u)}l.addEventListener("click",(function(e){const o=l.getBoundingClientRect(),c=e.clientX-o.left,r=e.clientY-o.top,u=Math.floor(r/t),s=Math.floor(c/t);a[u][s]=!a[u][s],i.cloneNode().play(),n(a)})),o.addEventListener("click",(()=>{r||u()})),c.addEventListener("click",(()=>{r&&(cancelAnimationFrame(r),r=null)})),n(a)})();